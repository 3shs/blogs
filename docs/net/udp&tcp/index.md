---
title: udp&tcp
---

## 1. 什么是UDP

UDP（User Datagram Protocol） 用户数据报协议 是一种面向无连接的传输层协议

特点如下：
1. UDP是一种无连接协议 发送数据之前不需要建立连接 这减少了开销 提高了效率
2. UDP不保证可靠交付 只是尽最大努力交付 可能会出现丢包现象 也不负责重发
3. UDP以报文为传输数据单位 每个UDP报文都包含了完整的地址信息
4. UDP不提供拥塞控制和流量控制 可能会导致网络拥堵
5. UDP支持一对一 一对多 多对一和多对多通信
6. UDP的首部只有8字节 比TCP的20字节小得多 开销较小
7. UDP本身不维护任何传输状态

适用场景：  
对可靠性要求不高 需要低延迟的应用 如视频直播 语音通话等

## 2. 什么是TCP

TPC（Transmission Control Protocol）传输控制协议 是一种面向连接的 可靠的 基于字节流的传输层通信协议

特点如下：
1. 面向连接：TCP需要在传输数据前先建立连接 数据传输结束后还需要释放连接 这种三次握手四次挥手的连接方式可对整个传输过程进行充分管理
2. 可靠传输：TCP提供可靠交付服务 通过发送端对每个数据包进行编号 接收端进行序列号检查 并发送确认应答ACK 如果数据包丢失可以重新传输 以此来确保数据完整可靠地达到接收端
3. 面向字节流：TCP以字节流的格式传递应用层数据 没有消息边界 需要靠应用层协议来划分消息
4. 流量控制：TCP连接两端都有限sized的缓冲空间 TCP可以通过滑动窗口机制控制发送端的数据发送速率 避免溢出接收端的缓冲区
5. 拥塞控制：TCP会监控网络拥塞程度 并根据采用不同算法来进行拥塞控制 如慢开始 拥塞避免 快重传等
6. 全双工通信：TCP允许通信双方的应用程序在任何时候都可以同时发送和接送数据 使通信更有效

> 滑动窗口机制
> - TCP中的滑动窗口是一种流量控制技术 它的基本机制是：
> 1. 接收方告知发送方自己还有多大的缓冲空间用来接收数据 这个空间大小就是窗口大小
> 2. 发送方根据这个窗口大小 控制发送的数据量 以匹配接收方的处理能力
> 3. 当接收方处理了数据后 窗口就向前滑动腾出空间 接收方就可以告知发送方新的窗口大小
> 4. 发送方根据新的窗口大小再次发送数据

## 3. 区别

| 区别 | TCP | UDP |
| :----: | :----: | :----: |
| 可靠性 | 可靠 | 不可靠 |
| 连接性 | 面向连接 | 无连接 |
| 报文 | 面向字节流 | 面向报文 |
| 效率 | 传输效率低 | 传输效率高 |
| 双工性 | 全双工 | 一对一，一对多，多对一，多对多 |
| 流量控制 | 滑动窗口 | 无 |
| 拥塞控制 | 慢开始、拥塞避免、快重传、快恢复 | 无 |
| 传输效率 | 慢 | 快 |